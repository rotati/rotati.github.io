<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="P1trWWBECm4uIvLtkYRRM-JEaUdtXNIasgkPXIqTXh8" />

    <title>Basic automated deployment from Travis CI to Heroku - Crafting Beautiful Applications</title>
    <meta name="description" content="Rotati is a full service Web and Mobile application consultancy. We use Ruby and JavaScript as our tools of choice.
">

    <link rel="stylesheet" href="/css/main.css">
    <link rel="canonical" href="http://rotati.com/2015/01/basic-automated-deployment-from-travis-ci-to-heroku/">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
    <!-- Optional bootstrap theme -->
    <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap-theme.min.css"> -->

    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/sl-slide.css">
    <link rel="stylesheet" href="/css/syntax.css">

    <script src="/js/vendor/modernizr-2.6.2-respond-1.1.0.min.js"></script>

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/images/ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="/images/ico/apple-touch-icon-57-precomposed.png">
</head>


  <body>

    <section id="nav">
  <nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
          <a class="navbar-brand pull-left" href="/"></a>
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        </div>
        <div class="navbar-collapse collapse nav-right">
          <ul class="nav navbar-nav">
              


  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
    <li >
        <a class="page-link" href="/about/">About</a>
    </li>
  

  
    <li >
        <a class="page-link" href="/team/">Team</a>
    </li>
  

  
    <li >
        <a class="page-link" href="/blog/">Blog</a>
    </li>
  

  
    <li >
        <a class="page-link" href="/jobs/">Jobs</a>
    </li>
  



  <li class="dropdown">
    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Training <i class="icon-angle-down"></i></a>
    <ul class="dropdown-menu">
      <li><a href="/training/rotati-training-center/">Rotati Training Center</a></li>
      <li role="separator" class="divider"></li>
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
          <li>
              <a class="page-link" href="/training/angular-js-courses/">Angular JS Courses</a>
          </li>
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
          <li>
              <a class="page-link" href="/training/hybrid-mobile-courses/">Hybrid Mobile Courses</a>
          </li>
        
      
        
      
        
      
        
      
        
          <li>
              <a class="page-link" href="/training/java-frameworks-courses/">Java Frameworks Courses</a>
          </li>
        
      
        
          <li>
              <a class="page-link" href="/training/java-short-courses/">Java Short Courses</a>
          </li>
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
          <li>
              <a class="page-link" href="/training/enterprise-architect-boot-camp-courses/">Enterprise Architect Boot Camp Courses</a>
          </li>
        
      
        
      
        
      
        
      
        
      
    </ul>
  </li>
  <li class="dropdown">
    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Services <i class="icon-angle-down"></i></a>
    <ul class="dropdown-menu">
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
          <li>
              <a class="page-link" href="/services/mobileapps/">Mobile Apps</a>
          </li>
        
      
        
      
        
      
        
      
        
          <li>
              <a class="page-link" href="/services/webapps/">Web Apps</a>
          </li>
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    </ul>
  </li>
  <li class="login"><a id="get-in-touch-top-menu" class="page-link" href="/contact">Get In Touch</a></li>



          </ul>
        </div>
    </div>
  </nav>
</section>


      <section class="title">
    <div class="container">
        <div class="row">
            <div class="col-md-6">
                <h1>Basic automated deployment from Travis CI to Heroku</h1>
            </div>
            <div class="col-md-6">
                <ul class="breadcrumb pull-right">
                    <li><a href="/">Home</a> <span class="divider"></span></li>
                    <li><a href="/blog/">Blog <span class="divider"></span></li>
                </ul>
            </div>
        </div>
    </div>
</section>

<section class="container">
  <div class="row">
    <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12">
        <div class="well blog">
            <a href="/2015/01/basic-automated-deployment-from-travis-ci-to-heroku/"><h2>Basic automated deployment from Travis CI to Heroku</h2></a>
<div class="blog-meta clearfix">
    <p class="pull-left">
      <i class="icon-user"></i> by <a href="#">Darren</a> |
      <i class="icon-folder-open"></i>Category:
      
        <a href="/categories/programming">Programming</a> |
      
      <i class="icon-calendar"></i> January 2015
    </p>
</div>

              <article><h3 id="background">Background</h3>

<p>It’s important to get continuous feedback while an application is being developed. In today’s post, lets explore the process to setup a simple, single branch, open source Git repo hosted on <a href="http://github.com">Github.com</a> that needs to be deployed to <a href="http://heroku.com">Heroku</a> when the build passes.</p>

<h3 id="installations">Installations</h3>

<p>First of all we need to install the <a href="https://toolbelt.heroku.com/">Heroku Toolbelt</a> and the <a href="https://github.com/travis-ci/travis.rb">Travis CI command line tool</a>.</p>

<p>Then we need to create an account on both of these platforms. Since we are using a public repo, we can simply connect <a href="http://travis-ci.org">Travis-CI.org</a> to our Github.com account directly. For Heroku, we simply need to create a new account via the <a href="http://heroku.com">Heroku Website</a>.</p>

<h3 id="create-and-configure-new-heroku-application">Create and configure new Heroku application</h3>

<p>To create a new application on Heroku, run the <code>heroku apps:create</code> command passing in your desired app name. If the app name is unavailable you will be asked to change it (usually namespacing the app name with your organization’s name results in a unique app name).</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">heroku apps:create rotati-app-name</code></pre></div>

<p>Since we are going to deploy a Rails application we’ll need to provision the Postgres addon like so. Note that <code>hobby-dev</code> is the free Postgres addon :)</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">heroku addons:add heroku-postgresql:hobby-dev</code></pre></div>

<p>Optionally, we might want to share access to this application Heroku Dashboard page with other developers (e.g. as collaborators on the project). This can be achieved using the following command:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">heroku sharing:add username@emaildomain.com</code></pre></div>

<p>That should be all we need to do now on the Heroku side now lets move onto setting up Travis CI.</p>

<h3 id="create-the-travis-configuation">Create the travis configuation</h3>

<p>Firstly, its necssary to ‘flick the switch’ for the particular repository you want Travis to watch out for and run tests against. On the page where <a href="https://travis-ci.org/repositories">Travis lists all your repos</a>, flick the switch to ‘On’ for the repo you are working with.</p>

<p>Next up, in our Github repo, we change directory into the project directory and run the following Travis CI command to setup a <code>.travis.yml</code> file for us:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">touch .travis.yml
travis setup heroku</code></pre></div>

<p>We need to manually specify the version of Ruby in this file too. This can be done by opening the <code>.travis.yml</code> file in a text editor and adding the language: ruby and rvm version at the top of it. Since we are using Heroku, its necessary to use a <a href="https://devcenter.heroku.com/articles/ruby-support#ruby-versions">version supported by Heroku</a> (the latest version being the preferred version). At the time of writing this post this is <code>v2.2.0p0</code>.</p>

<p>The <code>.travis.yml</code> file should now look something like this:</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="ss">language</span><span class="p">:</span> <span class="n">ruby</span>
<span class="ss">rvm</span><span class="p">:</span>
<span class="o">-</span> <span class="mi">2</span><span class="o">.</span><span class="mi">2</span><span class="o">.</span><span class="mi">0</span>
<span class="ss">deploy</span><span class="p">:</span>
  <span class="ss">provider</span><span class="p">:</span> <span class="n">heroku</span>
  <span class="ss">api_key</span><span class="p">:</span>
    <span class="ss">secure</span><span class="p">:</span> <span class="no">AHKXwF0xyFComYIXqOKIHbll2ExrITTs8DSMH0pD5GZrTdMRSVCr8WmAd3Xf0TBLT8xq8xWpZREbgP3m6vCGuxpRW0wKRUoeytMuS2Nr7nVjq6MFhB811D</span><span class="o">/</span><span class="n">z</span><span class="o">/</span><span class="no">BkP6l5RK</span><span class="o">/</span><span class="n">uClBgRD77dOOWDPTl0k7bCLOashazpzL</span><span class="o">+</span><span class="n">pvf0LbhI</span><span class="o">=</span>
  <span class="ss">app</span><span class="p">:</span> <span class="n">rotati</span><span class="o">-</span><span class="n">someapp</span>
  <span class="ss">on</span><span class="p">:</span>
    <span class="ss">repo</span><span class="p">:</span> <span class="n">rotati</span><span class="o">/</span><span class="n">someapp</span></code></pre></div>

<p>In our Rails application <code>database.yml</code> file, set the <code>production: url</code> property to the value of the environemnt variable <code>DATABASE_URL</code> which we know is now configured on our server.</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="ss">production</span><span class="p">:</span>
   <span class="ss">url</span><span class="p">:</span> <span class="o">&lt;%=</span> <span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;DATABASE_URL&#39;</span><span class="o">]</span> <span class="o">%&gt;</span></code></pre></div>

<p>Finally, specify the Ruby version for the application to use in Heroku and also add the <code>pg</code> gem to your Gemfile and run bundle to install it.</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="c1"># Inside Gemfile</span>
<span class="n">ruby</span> <span class="s2">&quot;2.2.0&quot;</span>

<span class="n">gem</span> <span class="s1">&#39;pg&#39;</span></code></pre></div>

<p><strong>NOTE</strong> the version of Ruby specified in the Gemfile must be the same as the version specified in the <code>.travis.yml</code> file above (otherwise Travis will complain!)</p>

<h3 id="conclusion">Conclusion</h3>

<p>While there are several steps to setup this CI workflow, once its done, well, its done and you will appreciate its rapid feedback and ease of use.</p>

<p>This process can be used to constantly review and test code as well as test drive (passing) code on a simple ‘staging’ server running on Heroku. Obviously there are many additional options that can be configured. One such option is deployment of an app from a specific branch as usually the <code>master</code> branch (as we are using in this demo) is reserved for Production ready code only.</p>

<p>For more details on configuation of Travis, check out the <a href="http://docs.travis-ci.com/">Travis CI Documentation</a>.</p>

</article>
            
<div class="tag">
  Tags :
  
    <a href="/tags/heroku"><span class="label label-success">heroku</span></a>
  
    <a href="/tags/travis-ci"><span class="label label-success">travis-ci</span></a>
  
    <a href="/tags/rails"><span class="label label-success">rails</span></a>
  
    <a href="/tags/deployment"><span class="label label-success">deployment</span></a>
  
    <a href="/tags/ci"><span class="label label-success">ci</span></a>
  
    <a href="/tags/continuous deployment"><span class="label label-success">continuous deployment</span></a>
  
</div>

            <div class="gap"></div>
            <div class="user-info media box">
              <div class="pull-left col-lg-6 col-md-6 col-sm-6 col-xs-12">
                  <img src="/images/staff/darren.jpg" alt="Darren" />
              </div>
              <!-- <div class="clearfix visible-xs-block"></div> -->
              <div class="media-body col-lg-6 col-md-6 col-sm-6 col-xs-12">
                  <h5>Darren</h5>
                  <p>Founder of Rotati and DevBootstrap. A software developer at heart who also loves spending time with his family - enjoying cycling, piano, reading and playing games with his daughter Sophia.</p>
                  <div class="author-meta">
                      <a class="btn btn-social btn-facebook" target="_blank" href="https://fb.com/jensendarren"><i class="icon-facebook"></i></a> <a class="btn btn-social btn-twitter" target="_blank" href="https://twitter.com/jensendarren"><i class="icon-twitter"></i></a> <a class="btn btn-social btn-linkedin" target="_blank" href="https://linkedin.com/in/jensendarren1"><i class="icon-linkedin"></i></a>
                  </div>
             </div>
          </div>
        </div>
    </div>

    <aside class="col-lg-4 col-md-4 col-sm-12 col-xs-12">

  <div class="widget">
      <h3>Blog Categories</h3>
      <div>
          <div class="row">

              <div class="col-md-6">
                  <ul class="list-unstyled">
                  
                    <li><a href="/categories/business" name="Business">Business</a></li>
                  
                    <li><a href="/categories/consulting" name="Consulting">Consulting</a></li>
                  
                    <li><a href="/categories/programming" name="Programming">Programming</a></li>
                  
                  </ul>
              </div>

          </div>

      </div>
  </div>
  <!-- End Category Widget -->

  <div class="widget">
      <h3>Tag Cloud</h3>
      <ul class="tag-cloud list-unstyled">
        
          <li><a href="/tags/rotati"><span class="label label-success">rotati</span></a></li>
        
          <li><a href="/tags/consulting"><span class="label label-success">consulting</span></a></li>
        
          <li><a href="/tags/webdevelopment"><span class="label label-success">webdevelopment</span></a></li>
        
          <li><a href="/tags/mobiledevelopment"><span class="label label-success">mobiledevelopment</span></a></li>
        
          <li><a href="/tags/clouddevelopment"><span class="label label-success">clouddevelopment</span></a></li>
        
          <li><a href="/tags/web"><span class="label label-success">web</span></a></li>
        
          <li><a href="/tags/mobile"><span class="label label-success">mobile</span></a></li>
        
          <li><a href="/tags/cloud"><span class="label label-success">cloud</span></a></li>
        
          <li><a href="/tags/ruby"><span class="label label-success">ruby</span></a></li>
        
          <li><a href="/tags/javascript"><span class="label label-success">javascript</span></a></li>
        
          <li><a href="/tags/rails"><span class="label label-success">rails</span></a></li>
        
          <li><a href="/tags/angularjs"><span class="label label-success">angularjs</span></a></li>
        
          <li><a href="/tags/custom"><span class="label label-success">custom</span></a></li>
        
          <li><a href="/tags/class"><span class="label label-success">class</span></a></li>
        
          <li><a href="/tags/enumerable"><span class="label label-success">enumerable</span></a></li>
        
          <li><a href="/tags/modules"><span class="label label-success">modules</span></a></li>
        
          <li><a href="/tags/observable"><span class="label label-success">observable</span></a></li>
        
          <li><a href="/tags/optionparser"><span class="label label-success">optionparser</span></a></li>
        
          <li><a href="/tags/stdlib"><span class="label label-success">stdlib</span></a></li>
        
          <li><a href="/tags/benchmark"><span class="label label-success">benchmark</span></a></li>
        
          <li><a href="/tags/heroku"><span class="label label-success">heroku</span></a></li>
        
          <li><a href="/tags/travis-ci"><span class="label label-success">travis-ci</span></a></li>
        
          <li><a href="/tags/deployment"><span class="label label-success">deployment</span></a></li>
        
          <li><a href="/tags/ci"><span class="label label-success">ci</span></a></li>
        
          <li><a href="/tags/continuous deployment"><span class="label label-success">continuous deployment</span></a></li>
        
          <li><a href="/tags/elasticsearch"><span class="label label-success">elasticsearch</span></a></li>
        
          <li><a href="/tags/aws"><span class="label label-success">aws</span></a></li>
        
      </ul>
  </div>
  <!-- End Tag Cloud Widget -->

  <div class="widget">
      <h3>Archive</h3>
      <ul class="archive arrow">
        
        
        
          
            <!--  -->
            <li><a href="#">September 2015</a></li>
          
        
        
        
          
            <!-- </ul> -->
            <li><a href="#">January 2015</a></li>
          
        
        
        
          
        
        
        
          
        
        
        
          
        
        
        
          
        
        
        
          
        
      </ul>
  </div>
  <!-- End Archive Widget -->

</aside>

  </div>
</section>


    <!--Bottom-->
<section id="bottom" class="main">
    <!--Container-->
    <div class="container">

        <div class="row">

            <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                <h4>CONTACT</h4>
                <ul class="list-unstyled address">
                    <li>
                        <i class="icon-home"></i>
                        <a href="/contact">Get In Touch</a>
                    </li>
                    <li>
                        <i class="icon-envelope"></i>
                        info(at)rotati.com
                    </li>
                    <li>
                        <i class="icon-globe"></i>
                        www.rotati.com
                    </li>
                    <li>
                        <i class="icon-phone"></i>
                        +855 12 22 33 48
                    </li>
                </ul>
                <p>&nbsp;</p>
            </div>

            <!--Training -->
            <div id="training" class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                <h4>TRAINING</h4>
                <div>
                    <ul class="arrow">
                        <li><a href="/training/angular-js-courses/">Angular JS Courses</a></li>
                        <li><a href="/training/enterprise-architect-boot-camp-courses">Enterprise Architect Boot Camp Courses</a></li>
                        <li><a href="/training/hybrid-mobile-courses">Hybrid Mobile Courses</a></li>
                        <li><a href="/training/java-frameworks-courses/">Java Frameworks Courses</a></li>
                        <li><a href="/training/java-short-courses/">Java Short Courses</a></li>
                    </ul>
                </div>
                <p>&nbsp;</p>
            </div>

            <!--Services -->
            <div id="services" class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                <h4>SERVICES</h4>
                <div>
                    <ul class="arrow">
                        <li><a href="/services/mobileapps/">Mobile Apps</a></li>
                        <li><a href="/services/webapps/">Web Apps</a></li>
                        <li><a href="/about#services">API Integration</a></li>
                        <li><a href="/about#services">GIS Apps</a></li>
<!--                         <li>Ruby Gems</li> -->
                        <!-- <li>Web Scrapers</li> -->
                    </ul>
                </div>
                <p>&nbsp;</p>
            </div>
            <!--End Archives-->

            <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
                <h4>ABOUT ROTATI CONSULTING</h4>
                <p>Rotati is a full service Web and Mobile application consultancy. We use Ruby and JavaScript as our tools of choice.
</p>
            </div>
        </div>

    </div>
    <!--/row-->
</div>
<!--/container-->

</section>
<!--/bottom-->
<!--Footer-->
<footer id="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-5 cp">
                &copy; 2015 Rotati Consulting. All rights reserved.
            </div>
            <!--/Copyright-->

            <div class="col-md-6">
                <ul class="social pull-right">
<!--    <li><a href="http://linkedin.com/in/rotati" target="_blank"><i class="icon-linkedin"></i></a></li> -->
                    <li><a href="http://github.com/rotati" target="_blank"><i class="icon-github-alt"></i></a></li>
                    <li><a href="http://twitter.com/rotaticonsult" target="_blank"><i class="icon-twitter"></i></a></li>
                    <li><a href="http://fb.com/rotaticonsulting" target="_blank"><i class="icon-facebook"></i></a></li>
                    <li><a href="/feed.xml" target="_blank"><i class="icon-rss"></i></a></li>
                    <li><a href="https://github.com/rotati/wiki/wiki" target="_blank"><i class="icon-book"></i></a></li>
                </ul>
            </div>

            <div class="col-md-1">
                <a id="gototop" class="gototop pull-right" href="#"><i class="icon-angle-up"></i></a>
            </div>
            <!--/Goto Top-->
        </div>
    </div>
</footer>
<!--/Footer-->

<script src="/js/vendor/jquery-1.9.1.min.js"></script>
<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>
<!-- Required javascript files for Slider -->
<script src="/js/vendor/jquery.ba-cond.min.js"></script>
<script src="/js/vendor/jquery.slitslider.js"></script>
<!-- /Required javascript files for Slider -->

<!-- SL Slider -->
<script type="text/javascript">
$(function() {
    var Page = (function() {

        var $navArrows = $( '#nav-arrows' ),
        slitslider = $( '#slider' ).slitslider( {
            autoplay : true
        } ),

        init = function() {
            initEvents();
        },
        initEvents = function() {
            $navArrows.children( ':last' ).on( 'click', function() {
                slitslider.next();
                return false;
            });

            $navArrows.children( ':first' ).on( 'click', function() {
                slitslider.previous();
                return false;
            });
        };

        return { init : init };

    })();

    Page.init();
});
</script>
<!-- /SL Slider -->


  </body>

</html>
